(function(t){function e(e){for(var n,r,i=e[0],u=e[1],c=e[2],l=0,d=[];l<i.length;l++)r=i[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);m&&m(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,r=1;r<o.length;r++){var i=o[r];0!==s[i]&&(n=!1)}n&&(a.splice(e--,1),t=u(u.s=o[0]))}return t}var n={},r={app:0},s={app:0},a=[];function i(t){return u.p+"js/"+({about:"about"}[t]||t)+"."+{about:"19af21fb"}[t]+".js"}function u(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,u),o.l=!0,o.exports}u.e=function(t){var e=[],o={about:1};r[t]?e.push(r[t]):0!==r[t]&&o[t]&&e.push(r[t]=new Promise((function(e,o){for(var n="css/"+({about:"about"}[t]||t)+"."+{about:"26f4de69"}[t]+".css",s=u.p+n,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var c=a[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===s))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],l=c.getAttribute("data-href");if(l===n||l===s)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var n=e&&e.target&&e.target.src||s,a=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete r[t],m.parentNode.removeChild(m),o(a)},m.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){r[t]=0})));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,o){n=s[t]=[e,o]}));e.push(n[2]=a);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(t);var d=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(m);var o=s[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",d.name="ChunkLoadError",d.type=n,d.request=r,o[1](d)}s[t]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=n,u.d=function(t,e,o){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(u.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(o,n,function(e){return t[e]}.bind(null,n));return o},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var m=l;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"329b":function(t,e,o){"use strict";var n=o("c30c"),r=o.n(n);r.a},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",[o("navbar"),o("v-content",[o("router-view")],1),o("myfooter")],1)},s=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nav",[o("v-app-bar",{attrs:{app:"","elevate-on-scroll":""}},[o("v-toolbar-title",[o("router-link",{attrs:{to:"/",flat:""}},[o("span",{staticClass:"blue--text text--lighten-1"},[t._v("Blog")])])],1),o("v-spacer"),o("v-menu",{attrs:{bottom:"","offset-y":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-btn",t._g({staticClass:"d-flex d-sm-none",attrs:{dark:"",icon:""}},n),[o("v-icon",[t._v("mdi-menu")])],1)]}}])},[t.isAuthenticated?t._e():o("v-list",t._l(t.menuNotActive,(function(e,n){return o("v-list-item",{key:n,attrs:{to:e.section}},[o("v-list-item-title",[t._v(t._s(e.title))])],1)})),1),t.isAuthenticated?o("v-list",[o("v-list-item",{attrs:{to:"/newpost"}},[o("v-list-item-title",[t._v("Create Post")])],1),o("v-list-item",{on:{click:function(e){return t.logOut()}}},[o("v-list-item-title",[t._v("Logout")])],1)],1):t._e()],1),t.isAuthenticated?t._e():o("v-toolbar-items",{staticClass:"d-none d-sm-flex"},t._l(t.menuNotActive,(function(e,n){return o("v-btn",{key:n,attrs:{to:e.section,text:""}},[t._v(t._s(e.title))])})),1),t.isAuthenticated?o("v-toolbar-title",[t._v("Hello, "+t._s(t.userLogged.username))]):t._e(),t.isAuthenticated?o("v-toolbar-items",{staticClass:"d-none d-sm-flex"},[o("v-btn",{attrs:{to:"/newpost",text:""}},[t._v("Create Post")]),o("v-btn",{attrs:{text:""},on:{click:function(e){return t.logOut()}}},[t._v("Logout")])],1):t._e()],1)],1)},i=[],u=o("2f62"),c={data:function(){return{drawer:!1,menuNotActive:[{icon:"home",title:"Login",section:"/login"},{icon:"info",title:"Register",section:"/register"}],menuActive:[{icon:"plus",title:"Create Post"},{icon:"warning",title:"Logout"}],options:{duration:500,offset:0,easing:"easeInOutCubic"}}},methods:{menuItems:function(){return this.menu},logOut:function(){this.$store.dispatch("logout"),this.$router.push("/")}},computed:Object(u["c"])(["isAuthenticated","userLogged"])},l=c,d=(o("a0ba"),o("2877")),m=o("6544"),f=o.n(m),v=o("40dc"),p=o("8336"),h=o("132d"),g=o("8860"),_=o("da13"),b=o("5d23"),P=o("e449"),w=o("2fa4"),y=o("2a7f"),k=Object(d["a"])(l,a,i,!1,null,"83bec39a",null),x=k.exports;f()(k,{VAppBar:v["a"],VBtn:p["a"],VIcon:h["a"],VList:g["a"],VListItem:_["a"],VListItemTitle:b["a"],VMenu:P["a"],VSpacer:w["a"],VToolbarItems:y["a"],VToolbarTitle:y["b"]});var C=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-footer",{staticClass:"font-weight-medium",attrs:{app:"",absolute:""}},[o("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[t._v(" "+t._s((new Date).getFullYear())+" â€” "),o("strong",[t._v("Dany Costa")])])],1)},O=[],S={},A=S,I=o("62ad"),V=o("553a"),j=Object(d["a"])(A,C,O,!1,null,null,null),L=j.exports;f()(j,{VCol:I["a"],VFooter:V["a"]});var T={data:function(){return{}},methods:{},components:{navbar:x,myfooter:L}},E=T,N=o("7496"),$=o("a75b"),B=Object(d["a"])(E,r,s,!1,null,null,null),q=B.exports;f()(B,{VApp:N["a"],VContent:$["a"]});o("d3b7");var M=o("8c4f"),D=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("v-container",[o("v-row",{attrs:{justify:"center"}},[o("v-col",{attrs:{lg:"6"}},t._l(t.allPosts,(function(e,n){return o("v-row",{key:n},[o("v-col",[o("v-card",[o("v-card-title",{staticClass:"headline"},[o("router-link",{attrs:{to:{name:"Post",params:{postId:e._id}}}},[t._v(t._s(e.title))])],1),o("v-img",{attrs:{src:"./"+e.image}}),o("v-card-subtitle",{domProps:{textContent:t._s(e.description)}}),o("v-card-actions",[o("v-btn",{attrs:{color:"orange",text:""},on:{click:function(o){return t.redirect(e._id)}}},[t._v(" "+t._s(e.comments.length)+" "),o("v-icon",{attrs:{right:"",dark:""}},[t._v("mdi-comment")])],1),-1===e.voters.indexOf(t.userLogged.id)?o("v-btn",{attrs:{color:"orange",text:""},on:{click:function(o){return t.upvote(e._id)}}},[t._v(" "+t._s(e.voters.length)+" "),o("v-icon",{attrs:{right:"",dark:""}},[t._v("mdi-arrow-up-bold-box")])],1):o("v-btn",{attrs:{color:"orange",text:""},on:{click:function(o){return t.downvote(e._id)}}},[t._v(" "+t._s(e.voters.length)+" "),o("v-icon",{attrs:{right:"",dark:""}},[t._v("mdi-arrow-down-bold-box")])],1),e.author==t.userLogged.id?o("v-btn",{attrs:{color:"orange",text:""},on:{click:function(o){return t.remove(e._id)}}},[o("v-icon",{attrs:{dark:""}},[t._v("mdi-trash-can-outline")])],1):t._e()],1)],1)],1)],1)})),1)],1)],1)],1)},H=[],z=o("5530"),F={name:"Home",data:function(){return{}},computed:Object(u["c"])(["isAuthenticated","allPosts","userLogged"]),methods:Object(z["a"])(Object(z["a"])({},Object(u["b"])(["fetchPosts","upvotePost","downvotePost","deletePost"])),{},{upvote:function(t){this.upvotePost(t)},downvote:function(t){this.downvotePost(t)},remove:function(t){this.deletePost(t).then((function(){console.log("deleted")}))},redirect:function(t){this.$router.push({name:"Post",params:{postId:t}})}}),created:function(){this.fetchPosts()}},R=F,J=(o("329b"),o("b0af")),K=o("99d9"),U=o("a523"),Y=o("adda"),G=o("0fd9"),Q=Object(d["a"])(R,D,H,!1,null,"1aa3a4ce",null),W=Q.exports;f()(Q,{VBtn:p["a"],VCard:J["a"],VCardActions:K["a"],VCardSubtitle:K["b"],VCardTitle:K["d"],VCol:I["a"],VContainer:U["a"],VIcon:h["a"],VImg:Y["a"],VRow:G["a"]});var X=o("0e44"),Z=o("bc3a"),tt=o.n(Z),et={status:"",token:localStorage.getItem("auth-token")||"",user:{}},ot={isAuthenticated:function(t){return!!t.token},authStatus:function(t){return t.status},userLogged:function(t){return t.user}},nt={login:function(t,e){var o=t.commit;return new Promise((function(t,n){o("auth_request"),tt()({url:"/api/users/login",data:e,method:"POST"}).then((function(e){var n=e.data.token;localStorage.setItem("auth-token",n),tt.a.defaults.headers.common["Authorization"]=n,o("auth_success",e.data),t(e)})).catch((function(t){o("auth_error"),localStorage.removeItem("auth-token"),n(t.response.data)}))}))},register:function(t,e){var o=t.commit;return new Promise((function(t,n){o("auth_request"),tt()({url:"/api/users/register",data:e,method:"POST"}).then((function(e){t(e)})).catch((function(t){n(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t){e("logout"),localStorage.removeItem("auth-token"),localStorage.removeItem("vuex"),delete tt.a.defaults.headers.common["Authorization"],t()}))}},rt={auth_request:function(t){t.status="loading"},auth_success:function(t,e){t.status="success",t.token=e.token,t.user=e.user},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token="",t.user={}}},st={state:et,getters:ot,actions:nt,mutations:rt},at=(o("4de4"),o("c740"),o("c975"),o("a434"),{posts:[],selectedPost:{}}),it={allPosts:function(t){return t.posts},selected:function(t){return t.selectedPost}},ut={fetchPosts:function(t){var e=t.commit;tt.a.get("/api/posts").then((function(t){e("set_posts",t.data.posts)}))},fetchPost:function(t,e){var o=t.commit;tt.a.get("/api/posts/"+e).then((function(t){o("selected_post",t.data.post)}))},upvotePost:function(t,e){var o=t.commit,n=t.rootState;tt.a.put("/api/posts/upvote/"+e).then((function(t){var r=n.AuthStore.user.id;return o("upvote_post",{user:r,id:e}),t}))},downvotePost:function(t,e){var o=t.commit,n=t.rootState;tt.a.put("/api/posts/downvote/"+e).then((function(t){var r=n.AuthStore.user.id;return o("downvote_post",{user:r,id:e}),t}))},deletePost:function(t,e){var o=t.commit;tt.a.delete("/api/posts/delete/"+e).then((function(t){return o("delete_post",e),t}))},newPost:function(t,e){var o=t.commit;return new Promise((function(t,n){tt.a.post("/api/posts",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(n){o("create_post",e),t(n)})).catch((function(t){n(t)}))}))},newComment:function(t,e){var o=t.commit,n=t.state;tt.a.post("/api/comments/new/"+n.selectedPost._id,{content:e}).then((function(t){o("add_comment",t.data.newComment)}))},upComment:function(t,e){var o=t.commit,n=t.state,r=t.rootState;tt.a.put("/api/comments/upvote/"+n.selectedPost._id+"/"+e).then((function(){var t=r.AuthStore.user.id;o("upvote_comment",{user:t,commentId:e})}))},downComment:function(t,e){var o=t.commit,n=t.state,r=t.rootState;tt.a.put("/api/comments/downvote/"+n.selectedPost._id+"/"+e).then((function(){var t=r.AuthStore.user.id;o("downvote_comment",{user:t,commentId:e})}))},deleteComment:function(t,e){var o=t.commit,n=t.state;tt.a.delete("/api/comments/delete/"+n.selectedPost._id+"/"+e).then((function(){o("delete_comment",e)}))}},ct={set_posts:function(t,e){t.posts=e,t.selectedPost=null},selected_post:function(t,e){t.selectedPost=e},create_post:function(t,e){t.posts.unshift(e)},delete_post:function(t,e){t.posts=t.posts.filter((function(t){return t._id!==e}))},upvote_post:function(t,e){var o=e.user,n=e.id;if(t.selectedPost)t.selectedPost.voters.push(o);else{var r=t.posts.findIndex((function(t){return t._id===n}));t.posts[r].voters.push(o)}},downvote_post:function(t,e){var o=e.user,n=e.id;if(t.selectedPost){var r=t.selectedPost.voters.indexOf(o);r>-1&&t.selectedPost.voters.splice(r,1)}else{var s=t.posts.findIndex((function(t){return t._id===n})),a=t.posts[s].voters.indexOf(o);a>-1&&t.posts[s].voters.splice(a,1)}},add_comment:function(t,e){t.selectedPost.comments.push(e)},delete_comment:function(t,e){t.selectedPost.comments=t.selectedPost.comments.filter((function(t){return t._id!==e}))},upvote_comment:function(t,e){var o=e.user,n=e.commentId,r=t.selectedPost.comments.findIndex((function(t){return t._id===n}));t.selectedPost.comments[r].voters.push(o)},downvote_comment:function(t,e){var o=e.user,n=e.commentId,r=t.selectedPost.comments.findIndex((function(t){return t._id===n})),s=t.selectedPost.comments[r].voters.indexOf(o);s>-1&&t.selectedPost.comments[r].voters.splice(s,1)}},lt={state:at,getters:it,actions:ut,mutations:ct};n["a"].use(u["a"]);var dt=new u["a"].Store({plugins:[Object(X["a"])()],modules:{AuthStore:st,PostStore:lt}});n["a"].use(M["a"]);var mt=function(t,e,o){dt.getters.isAuthenticated?o("/"):o()},ft=function(t,e,o){dt.getters.isAuthenticated?o():o("/login")},vt=[{path:"/",name:"Home",component:W},{path:"/newpost",name:"New Post",component:function(){return o.e("about").then(o.bind(null,"6e73"))},beforeEnter:ft},{path:"/posts/:postId",name:"Post",component:function(){return o.e("about").then(o.bind(null,"37d3"))}},{path:"/register",name:"Register",component:function(){return o.e("about").then(o.bind(null,"73cf"))}},{path:"/login",name:"Login",component:function(){return o.e("about").then(o.bind(null,"a55b"))},beforeEnter:mt}],pt=new M["a"]({mode:"history",base:"/",routes:vt}),ht=pt,gt=o("f309");n["a"].use(gt["a"]);var _t=new gt["a"]({theme:{dark:!0}});n["a"].config.productionTip=!1,n["a"].prototype.$http=tt.a;var bt=localStorage.getItem("auth-token");bt&&(tt.a.defaults.headers.common["Authorization"]=bt),new n["a"]({router:ht,vuetify:_t,store:dt,render:function(t){return t(q)}}).$mount("#app")},a0ba:function(t,e,o){"use strict";var n=o("a22a"),r=o.n(n);r.a},a22a:function(t,e,o){},c30c:function(t,e,o){}});
//# sourceMappingURL=app.094fa089.js.map